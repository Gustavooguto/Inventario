CREATE TABLE COMPUTADOR(
	codPC SERIAL NOT NULL,
	macETH MACADDR NOT NULL,
	macWLAN MACADDR NOT NULL,
	tipoComputador VARCHAR(8),
	mbNSerie VARCHAR(30),
	modeloNotebookChipset VARCHAR(30),
	processador VARCHAR(30),
	ram VARCHAR(50),
	rom VARCHAR(50),
	codSetor INTEGER,
	codEmpresa INTEGER,
	codPessoa INTEGER,
	score INTEGER DEFAULT NULL
);

CREATE TABLE SISTEMAOPERACIONAL(	
	host VARCHAR(20),
	sistemaOperacional VARCHAR(50),
	chaveAtivacao VARCHAR(50),
	IPv4 INET,
	macETH MACADDR NOT NULL,
	macWLAN MACADDR NOT NULL,
	codPC INTEGER
);

CREATE TABLE PESSOA(	
	codPessoa SERIAL NOT NULL,
	nomeCompleto VARCHAR(70),
	dataNascimento date,
	email VARCHAR(50),
	codSetor INTEGER,
	macETH MACADDR,
	macWLAN MACADDR,
	codPC INTEGER,
	codEmpresa INTEGER
);

CREATE TABLE SETOR(	
	codSetor SERIAL NOT NULL,
	codCoordenador INTEGER, 
	nomeSetor VARCHAR(20),
	codEmpresa INTEGER
);

CREATE TABLE EMPRESA(
	codEmpresa SERIAL NOT NULL,
	nomeEmpresa varchar(254),
	endereco jsonb
);

--> CONSTRAINTS - PRIMARY KEY.
ALTER TABLE Computador ADD CONSTRAINT codPC PRIMARY KEY (codPC);
ALTER TABLE Pessoa ADD CONSTRAINT codPessoa PRIMARY KEY (codPessoa);
ALTER TABLE Setor ADD CONSTRAINT codSetor PRIMARY KEY (codSetor);
ALTER TABLE Empresa ADD CONSTRAINT codEmpresa PRIMARY KEY (codEmpresa);

--> CONSTRAINTS - FOREIGN KEY.
ALTER TABLE Computador ADD CONSTRAINT codSetor FOREIGN KEY (codSetor) REFERENCES Setor(codSetor) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE Computador ADD CONSTRAINT codEmpresa FOREIGN KEY (codEmpresa) REFERENCES Empresa(codEmpresa) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE Computador ADD CONSTRAINT codPessoa FOREIGN KEY (codPessoa) REFERENCES Pessoa(codPessoa) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE SistemaOperacional ADD CONSTRAINT codPC FOREIGN KEY (codPC) REFERENCES Computador (codPC) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE Pessoa ADD CONSTRAINT codSetor FOREIGN KEY (codSetor) REFERENCES Setor (codSetor) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE Pessoa ADD CONSTRAINT codPC FOREIGN KEY (codPC) REFERENCES Computador (codPC) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE Pessoa ADD CONSTRAINT codEmpresa FOREIGN KEY (codEmpresa) REFERENCES Empresa(codEmpresa) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE Setor ADD CONSTRAINT codEmpresa FOREIGN KEY (codEmpresa) REFERENCES Empresa(codEmpresa) ON UPDATE CASCADE ON DELETE SET NULL;
ALTER TABLE Setor ADD CONSTRAINT codCoordenador FOREIGN KEY (codCoordenador) REFERENCES Pessoa (codPessoa) ON UPDATE CASCADE ON DELETE SET NULL;



DROP TABLE COMPUTADOR CASCADE;
DROP TABLE PESSOA CASCADE;
DROP TABLE SISTEMAOPERACIONAL CASCADE;
DROP TABLE SETOR CASCADE;
DROP TABLE EMPRESA CASCADE;

INSERT INTO Empresa VALUES (DEFAULT, 'Sponte Informática', '{"Contato":{"Telefone":"3309-2371", "WhatsApp":"46 99110-9963",
							"E-mail":"ti@sponte.com.br"}, "Endereço":{"Rua":"Av. Elisa Rosa Colla Padoan", "Número":"45", 
							"Complemento":"módulo 06", "Cidade":"Pato Branco", "UF":"PR","CEP":"85503-380"}}');

INSERT INTO Setor VALUES (DEFAULT, NULL, 'Recursos Humanos', 1);

INSERT INTO PESSOA VALUES (DEFAULT, 'Cristiane Pacianello', NULL, 'cristiane@sponte.com.br', 1, NULL, NULL, NULL, 1);

UPDATE Setor SET CodCoordenador = 1;

INSERT INTO Computador VALUES (DEFAULT, '54-BF-64-F6-1D-65', '64-32-A8-1C-A1-24', 'NOTEBOOK', 'G7GJDQ2', 'Dell Inspiron 5570', 'Core i5 8250U', '8GB DDR4 2400', 'HDD 1TB', 1, 1, 1);

INSERT INTO SistemaOperacional VALUES ('NB-CRIS', 'W10 Pro', 'YRJJR-MNYYC-CC48T-W4CRJ-29WK3', NULL, '54-BF-64-F6-1D-65', '64-32-A8-1C-A1-24', '1');


